---
layout: post
title:  "Mondrian 4: Generate Date Dimension Automatically"
summary: Mondrian 4 has a new feature which will allow you to create and populate the date dimension automatically. Learn how it's done. 
date: 2015-01-03
categories: mondrian
tags: OLAP, Mondrian, MDX
published: false
---

There is one little magic magic feature within Mondrian 4 (one of many to be precise), that deserves a dedicated mention:

Over and over again we find ourselves creating date dimensions. Clearly, this could be easier, and in Mondrian 4 it is: **Mondrian 4** comes with an **automatic Date Dimension Generator**!

Now this doesn't mean it will create a date domension with an extensive list of attributes, but if you just need a simple date dimension, then this feature will make your life easier!

In the simplest fashion you can specify just this in the **Mondrian OLAP Schema** within the `<PhysicalSchema>` element:

```xml
<AutoGeneratedDateTable 
name="dim_date" 
schema="tutorial" 
startDate="2012-01-01" 
endDate="2020-01-01"
/>
```

You can specify a **start date** and **end date** and Mondrian will create following attributes for this period ([Initial Reference](http://julianhyde.blogspot.co.uk/2012/02/auto-generated-date-dimension-tables.html) and [Final Reference](http://mondrian.pentaho.com/headapi/mondrian/olap/MondrianDef.AutoGeneratedDateTable.html)):

- time_id (role JULIAN, the Julian day number, e.g. 12345)
- the_date (role DATE, e.g. '2012-12-31', a DATE value or the DBMS equivalent)
- the_day (role DAY_OF_WEEK_NAME, e.g. 'Wednesday')
- the_month (role MONTH_NAME, e.g. 'December')
- the_year (role YEAR, e.g. 2012)
- day_of_month (role DAY_OF_MONTH, e.g. '31')
- week_of_year (role WEEK_OF_YEAR, e.g. 53) 
- month_of_year (role MONTH, e.g. 12)
- quarter (role QUARTER, e.g. 4) 

All these attributes will allow you to define a date dimension in the **OLAP Schema** with a date, weekly and monthly hierarchy (if you wish to do so).

When the OLAP Schema is loaded, Mondrian checks if the table exists and if not Mondrian will create the table.

There might be situations were you want to pick only certain attributes or assign different names to the columns. In this case, you can specify something like this in your **OLAP Schema**:

```xml
<AutoGeneratedDateTable name="dim_date_m4" schema="tutorial" startDate="2012-01-01" endDate="2020-01-01">
  <!-- optionally define the specific date fields that you require -->
  <ColumnDefs>
      <ColumnDef name="date_tk"> <!-- other attributes: type='int' -->
          <TimeDomain role="JULIAN"/> <!-- other attributes: epoch='1996-01-01' -->
      </ColumnDef>
      <ColumnDef name="the_date">
          <TimeDomain role="DATE"/>
      </ColumnDef>
      <ColumnDef name="yymmdd">
          <TimeDomain role="YYMMDD"/>
      </ColumnDef>
      <ColumnDef name="yyyymmdd">
          <TimeDomain role="YYYYMMDD"/>
      </ColumnDef>
      <ColumnDef name="the_year">
          <TimeDomain role="YEAR"/>
      </ColumnDef>
      <ColumnDef name="the_quarter">
          <TimeDomain role="QUARTER"/>
      </ColumnDef>
      <ColumnDef name="the_month">
          <TimeDomain role="MONTH"/>
      </ColumnDef>
      <ColumnDef name="the_month_name"><!-- String -->
          <TimeDomain role="MONTH_NAME"/>
      </ColumnDef>
      <ColumnDef name="the_day_of_month">
          <TimeDomain role="DAY_OF_MONTH"/>
      </ColumnDef>
      <ColumnDef name="the_week">
          <TimeDomain role="WEEK_OF_YEAR"/>
      </ColumnDef>
      <ColumnDef name="the_day_of_week_name"><!-- String -->
          <TimeDomain role="DAY_OF_WEEK_NAME"/>
      </ColumnDef>
  </ColumnDefs>
  <Key>
      <Column name="date_tk"/>
  </Key>
</AutoGeneratedDateTable>
```

You can just reference the column names (as listed above) or if you want to use your own column names, you have to define the `ROLE` as well.